<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover">
    <title>nvinhtool.click - Fix Tri·ªát ƒê·ªÉ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; }
        body, html { background: #0b1120; height: 100%; width: 100%; overflow: hidden; font-family: 'Segoe UI', sans-serif; }

        /* M√†n h√¨nh ch·ªù */
        #loading { position: fixed; inset: 0; background: #0b1120; z-index: 9999; display: flex; align-items: center; justify-content: center; transition: opacity 0.8s ease; }
        #loading img { width: 120px; }

        /* L·ªöP TUY·∫æT & CH·ªÆ - ƒê·∫£m b·∫£o kh√¥ng bao gi·ªù b·ªã ·∫©n */
        #snow-container { 
            position: fixed; 
            inset: 0; 
            pointer-events: none; 
            z-index: 10; /* N·∫±m d∆∞·ªõi l·ªõp h·ªôp qu√† */
        }

        .falling-item { 
            position: absolute; top: -50px; white-space: nowrap; 
            animation: fall linear forwards; 
            transition: color 2s ease, text-shadow 2s ease; 
        }
        
        @keyframes fall { 
            0% { transform: translateY(0) rotate(0deg); opacity: 0; } 
            15% { opacity: var(--max-opacity); } 
            100% { transform: translateY(110vh) rotate(15deg); opacity: 0; } 
        }

        /* Ch·ªØ h·ªìng nh·∫°t l·∫•p l√°nh c·ª±c ƒë·∫πp */
        .glitter-pink {
            color: #FFB6C1 !important; 
            text-shadow: 0 0 10px #FFB6C1, 0 0 20px #fff, 0 0 30px #FFB6C1 !important;
            font-weight: bold !important;
            animation: sparklePulse 1s infinite alternate !important;
        }
        @keyframes sparklePulse {
            from { filter: brightness(1); opacity: 0.8; }
            to { filter: brightness(1.4); opacity: 1; }
        }

        /* V√ôNG CH·ª®A H·ªòP QU√Ä - T√°ch bi·ªát ho√†n to√†n */
        .gift-container {
            position: fixed; top: -300px; left: 50%; transform: translateX(-50%);
            z-index: 2000; cursor: pointer; 
            transition: top 3s cubic-bezier(0.25, 1, 0.5, 1);
        }
        .gift-at-center { top: 50% !important; transform: translate(-50%, -50%) !important; }

        .gift-box-body {
            position: relative; width: 100px; height: 85px; background: #d42424;
            border-radius: 5px; box-shadow: 0 15px 35px rgba(0,0,0,0.6);
            animation: swing 3s infinite ease-in-out;
        }
        @keyframes swing { 0%, 100% { transform: rotate(-3deg); } 50% { transform: rotate(3deg); } }
        .gift-box-body::before { content: ''; position: absolute; width: 110px; height: 25px; background: #e74c3c; top: -25px; left: -5px; border-radius: 3px; z-index: 5; }
        .gift-box-body::after { content: ''; position: absolute; width: 20px; height: 100%; background: #ffdb11; left: 50%; transform: translateX(-50%); }

        .letter {
            position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 80px; height: 50px; background: #fff; border-radius: 8px;
            transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); opacity: 0; z-index: 2;
        }
        .open .letter {
            width: 300px; height: 380px; bottom: 50px; opacity: 1; 
            transform: translateX(-50%) translateY(-20px);
            padding: 25px; box-shadow: 0 0 40px rgba(255,255,255,0.3);
        }
        .open .gift-box-body::before { transform: translateY(-80px) rotate(-20deg); opacity: 0; }
        .open .gift-box-body { animation: none; }

        .letter-text { display: none; text-align: center; color: #333; }
        .open .letter-text { display: block; animation: fadeIn 1s forwards; }

        /* HI·ªÜU ·ª®NG XOAY 1 V√íNG R∆†I XU·ªêNG - Ch·ªâ t√°c ƒë·ªông l√™n BOX v√† LETTER */
        .box-falling-animation { 
            animation: rotateOnceAndFall 1.5s forwards ease-in !important; 
        }
        @keyframes rotateOnceAndFall {
            0% { transform: rotate(0deg) translateY(0); opacity: 1; }
            100% { transform: rotate(360deg) translateY(120vh); opacity: 0; }
        }
    </style>
</head>
<body>

    <div id="loading"><img src="https://media4.giphy.com/media/0dAMYxFahMEvxW0ese/giphy.gif"></div>
    
    <div id="snow-container"></div>

    <div id="gift-wrapper" class="gift-container">
        <div class="letter" id="letter-close">
            <div class="letter-text">
                <h2 style="color: #d42424; margin-bottom: 15px;">Th√¢n G·ª≠i ‚ù§Ô∏è</h2>
                <p>Ch√∫c b·∫°n m·ªôt ng√†y th·∫≠t tuy·ªát v·ªùi!</p>
                <div style="font-size: 50px; margin: 25px 0;">üéÅ‚ú®</div>
                <p style="font-size: 13px; font-style: italic; color: #777;">(B·∫•m v√†o th∆∞ ƒë·ªÉ ƒë√≥ng l·∫°i & nh·∫≠n b·∫•t ng·ªù)</p>
            </div>
        </div>
        <div class="gift-box-body" id="target-box" onclick="toggleGift()"></div>
    </div>

    <script>
        let isOpened = false;
        let pinkMode = false;

        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loading').style.opacity = '0';
                setTimeout(() => { 
                    document.getElementById('loading').style.display = 'none'; 
                    // CH·ªú ƒê√öNG 5 GI√ÇY H·ªòP QU√Ä M·ªöI XU·∫§T HI·ªÜN
                    setTimeout(() => {
                        document.getElementById('gift-wrapper').classList.add('gift-at-center');
                    }, 5000);
                }, 800);
            }, 1000);
        });

        function toggleGift() {
            const wrapper = document.getElementById('gift-wrapper');
            const box = document.getElementById('target-box');
            const letter = document.getElementById('letter-close');

            if (!isOpened) {
                wrapper.classList.add('open');
                isOpened = true;
            } else {
                // ƒê√ìNG L·∫†I
                wrapper.classList.remove('open');
                
                setTimeout(() => {
                    // 1. Ch·ªâ h·ªôp qu√† xoay v√† r∆°i
                    box.classList.add('box-falling-animation');
                    letter.style.opacity = '0'; 

                    // 2. Chuy·ªÉn ch·ªØ sang h·ªìng l·∫•p l√°nh
                    pinkMode = true;
                    // Nhu·ªôm h·ªìng ngay l·∫≠p t·ª©c c√°c ch·ªØ ƒëang bay
                    document.querySelectorAll('.falling-item').forEach(item => {
                        if (item.innerText.includes('hot ph√≤ng')) {
                            item.classList.add('glitter-pink');
                        }
                    });
                }, 600);
            }
        }
        
        document.getElementById('letter-close').onclick = toggleGift;

        function createFallingObject() {
            const container = document.getElementById('snow-container');
            const item = document.createElement('div');
            item.className = 'falling-item';
            
            const rand = Math.random();
            let maxOpacity = 0.5;

            if (rand < 0.6) { 
                item.innerText = 'hot ph√≤ng ~';
                item.style.fontSize = (Math.random() * 4 + 11) + 'px';
                if (pinkMode) {
                    item.classList.add('glitter-pink');
                } else {
                    item.style.color = 'rgba(255, 255, 255, 0.4)';
                }
                maxOpacity = 0.7;
            } else if (rand < 0.8) { 
                const img = document.createElement('img');
                img.src = 'https://media2.giphy.com/media/GkOGd5X6gdP1tfF4zx/giphy.gif';
                img.style.width = '15px';
                item.appendChild(img);
            } else { 
                item.innerHTML = '‚ùÑ';
                item.style.color = 'rgba(255, 255, 255, 0.6)';
            }
            
            item.style.setProperty('--max-opacity', maxOpacity);
            item.style.left = Math.random() * 100 + 'vw';
            const duration = Math.random() * 5 + 7;
            item.style.animationDuration = duration + 's';
            container.appendChild(item);

            setTimeout(() => { item.remove(); }, duration * 1000);
        }
        setInterval(createFallingObject, 250);
        document.addEventListener('contextmenu', e => e.preventDefault());
    </script>
</body>
</html>
